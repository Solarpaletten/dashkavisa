# Конфигурация visa_bot

**Версия документа:** v0.1

---

## Файлы конфигурации

| Файл | Назначение |
|------|------------|
| `.env` | Основные настройки (НЕ коммитится в Git) |
| `.env.example` | Шаблон настроек (коммитится) |
| `config.py` | Загрузка и обработка конфигурации |

---

## Переменные окружения (.env)

### Telegram Bot

| Переменная | Обязательная | Описание |
|------------|--------------|----------|
| `TELEGRAM_BOT_TOKEN` | ✅ Да | Токен бота от @BotFather |

**Как получить:**
1. Открыть @BotFather в Telegram
2. Отправить `/newbot`
3. Следовать инструкциям
4. Скопировать полученный токен

---

### VFS Global Credentials

| Переменная | Обязательная | Описание |
|------------|--------------|----------|
| `VFS_EMAIL` | ✅ Да | Email аккаунта VFS Global |
| `VFS_PASSWORD` | ✅ Да | Пароль аккаунта VFS Global |

**Требования к аккаунту:**
- Аккаунт должен быть зарегистрирован на visa.vfsglobal.com
- Email должен быть подтверждён
- Аккаунт должен быть для региона Беларусь/Польша

---

### Данные пользователя (для формы записи)

| Переменная | Обязательная | Формат | Описание |
|------------|--------------|--------|----------|
| `USER_FIRST_NAME` | ✅ Да | Латиница, заглавные | Имя (как в паспорте) |
| `USER_LAST_NAME` | ✅ Да | Латиница, заглавные | Фамилия (как в паспорте) |
| `USER_BIRTH_DATE` | ✅ Да | DD.MM.YYYY | Дата рождения |
| `USER_PASSPORT` | ✅ Да | Формат паспорта | Номер паспорта |

**Пример:**
```
USER_FIRST_NAME=IVAN
USER_LAST_NAME=PETROV
USER_BIRTH_DATE=15.03.1985
USER_PASSPORT=AB1234567
```

---

### Настройки записи

| Переменная | Обязательная | По умолчанию | Описание |
|------------|--------------|--------------|----------|
| `CITY` | Нет | Минск | Город визового центра |
| `VISA_TYPE` | Нет | Шенген виза | Тип визы |

**Доступные значения CITY:**
- Минск

**Доступные значения VISA_TYPE:**
- Шенген виза
- National Visa D

---

### Настройки проверки

| Переменная | Обязательная | По умолчанию | Описание |
|------------|--------------|--------------|----------|
| `CHECK_INTERVAL` | Нет | 60 | Интервал проверки (минуты) |
| `MAX_DATES_TO_SHOW` | Нет | 5 | Макс. количество дат в уведомлении |

**Рекомендации:**
- `CHECK_INTERVAL` не менее 30 минут (чтобы не перегружать сервер VFS)
- Слишком частые проверки могут привести к блокировке

---

### Логирование

| Переменная | Обязательная | По умолчанию | Описание |
|------------|--------------|--------------|----------|
| `LOG_LEVEL` | Нет | INFO | Уровень логирования |

**Доступные значения:**
- DEBUG — максимум информации
- INFO — стандартный режим
- WARNING — только предупреждения
- ERROR — только ошибки

---

## Полный пример .env

```env
# === Telegram Bot ===
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz

# === VFS Global ===
VFS_EMAIL=user@example.com
VFS_PASSWORD=SecurePassword123

# === User Data ===
USER_FIRST_NAME=FIRSTNAME
USER_LAST_NAME=LASTNAME
USER_BIRTH_DATE=01.01.1990
USER_PASSPORT=AB1234567

# === Settings ===
CITY=Минск
VISA_TYPE=Шенген виза
CHECK_INTERVAL=60
MAX_DATES_TO_SHOW=5

# === Logging ===
LOG_LEVEL=INFO
```

---

## Безопасность

### Что НЕЛЬЗЯ делать

- ❌ Коммитить `.env` в Git
- ❌ Передавать `.env` по открытым каналам
- ❌ Хранить пароли в `config.py`
- ❌ Логировать пароли

### Что НУЖНО делать

- ✅ Добавить `.env` в `.gitignore`
- ✅ Использовать `.env.example` как шаблон
- ✅ Менять пароли при подозрении на утечку
- ✅ Использовать сложные пароли

---

## Проверка конфигурации

После настройки `.env` можно проверить загрузку:

```bash
source venv/bin/activate
python -c "from config import *; print('Token:', TELEGRAM_BOT_TOKEN[:10] + '...')"
```

Должен вывести первые 10 символов токена.

---

## Изменение конфигурации

При изменении `.env` необходимо перезапустить бота:

```bash
pm2 restart visabot
```

Изменения применяются только после перезапуска.

---

*Документ актуален для версии v0.1*
